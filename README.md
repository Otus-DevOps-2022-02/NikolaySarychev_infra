# NikolaySarychev_infra
NikolaySarychev Infra repository

# Выполнено ДЗ №8
 - [*] Основное ДЗ
 - [ ] Задание со *


## В процессе сделано:
1. Ознакомились с документацией для создание динамичкского json-inventory
2. При повторном выполнении плейбука clone.yml после удаления каталога ~/reddit, статус changed вместо 1 принимает значение 0, т.к. в случае когда папка с файлами
    изначально существовала на сервере - прейбук при его запуске ничего не создавал, а после её удаления, он произвел скачивание файлов из репозитория и создание папки.
    В этом примере мы можем наблюдать что такое идемпотентность.
3. Создан файл inventory.json по примеру приложенному к заданию
4. Команда ansible all -m ping  выполнена успешно
5. Добавлены параметры в файл ansible.cfg для работы с инвентори в
    формате JSON.
6. Пример статического инвентори в JSON можно увидеть здесь: https://linuxhint.com/ansible_inventory_json_format/ Сущеуствуют отличия в синтаксисе файлов, например в JSON динамического инвентори хосты перечисляются в квадратных скобках. Так же в динамическом инвентори используется секция _meta, которой нет в статическом инвентори.
7. На языке Python был написан скрипт для генерации динамического json-inventory файла, путь к файлу ansible/ansible_di_script.py
Наименования хостов и IP-адреса  берутся из списка который мы получаем при использовании команды 'terraform output'

Опции скрипта
--list - Возвращает список групп, хостов, а также переменных в формате JSON.
--host - Поддержка этой опции необязательна и не используется (указана пустая секция _meta). Cкрипт возвращает элемент верхнего уровня с именем _meta, в котором могут быть перечислены все переменные для хостов.

8. Приложен файл динамического ansible/inventory.json
9. При запуске Ansible скрипт динамического инвентори вызывается с помощью ключей -i или --inventory
10. Проверена доступность всех хостов с помощью динамического и статическогоинвентори командой ansible all -m ping


## PR checklist
 - [] Выставил label с номером домашнего задания
 - [] Выставил label с темой домашнего задания
